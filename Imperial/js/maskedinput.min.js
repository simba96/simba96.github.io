!function(F){"function"==typeof define&&define.amd?define(["jquery"],F):F("object"==typeof exports?require("jquery"):jQuery)}(function(F){var G,H=navigator.userAgent,I=/iphone/i.test(H),J=/chrome/i.test(H),K=/android/i.test(H);F.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},F.fn.extend({caret:function(L,M){var N;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof L?(M="number"==typeof M?M:L,this.each(function(){this.setSelectionRange?this.setSelectionRange(L,M):this.createTextRange&&(N=this.createTextRange(),N.collapse(!0),N.moveEnd("character",M),N.moveStart("character",L),N.select())})):(this[0].setSelectionRange?(L=this[0].selectionStart,M=this[0].selectionEnd):document.selection&&document.selection.createRange&&(N=document.selection.createRange(),L=0-N.duplicate().moveStart("character",-1e5),M=L+N.text.length),{begin:L,end:M})},unmask:function(){return this.trigger("unmask")},mask:function(L,M){var N,O,P,Q,R,S,T,U;if(!L&&0<this.length){N=F(this[0]);var V=N.data(F.mask.dataName);return V?V():void 0}return M=F.extend({autoclear:F.mask.autoclear,placeholder:F.mask.placeholder,completed:null},M),O=F.mask.definitions,P=[],Q=T=L.length,R=null,F.each(L.split(""),function(W,X){"?"==X?(T--,Q=W):O[X]?(P.push(new RegExp(O[X])),null===R&&(R=P.length-1),Q>W&&(S=P.length-1)):P.push(null)}),this.trigger("unmask").each(function(){function W(){if(M.completed){for(var la=R;S>=la;la++)if(P[la]&&ia[la]===X(la))return;M.completed.call(ha)}}function X(la){return M.placeholder.charAt(la<M.placeholder.length?la:0)}function Y(la){for(;++la<T&&!P[la];);return la}function Z(la){for(;0<=--la&&!P[la];);return la}function $(la,ma){var na,oa;if(!(0>la)){for(na=la,oa=Y(ma);T>na;na++)if(P[na]){if(!(T>oa&&P[na].test(ia[oa])))break;ia[na]=ia[oa],ia[oa]=X(oa),oa=Y(oa)}fa(),ha.caret(Math.max(R,la))}}function _(la){var ma,na,oa,pa;for(ma=la,na=X(la);T>ma;ma++)if(P[ma]){if(oa=Y(ma),pa=ia[ma],ia[ma]=na,!(T>oa&&P[oa].test(pa)))break;na=pa}}function ba(){ga(),ha.val()!=ka&&ha.change()}function ea(la,ma){var na;for(na=la;ma>na&&T>na;na++)P[na]&&(ia[na]=X(na))}function fa(){ha.val(ia.join(""))}function ga(la){var ma,na,oa,pa=ha.val(),qa=-1;for(ma=0,oa=0;T>ma;ma++)if(P[ma]){for(ia[ma]=X(ma);oa++<pa.length;)if(na=pa.charAt(oa-1),P[ma].test(na)){ia[ma]=na,qa=ma;break}if(oa>pa.length){ea(ma+1,T);break}}else ia[ma]===pa.charAt(oa)&&oa++,Q>ma&&(qa=ma);return la?fa():Q>qa+1?M.autoclear||ia.join("")===ja?(ha.val()&&ha.val(""),ea(0,T)):fa():(fa(),ha.val(ha.val().substring(0,qa+1))),Q?ma:R}var ha=F(this),ia=F.map(L.split(""),function(la,ma){return"?"==la?void 0:O[la]?X(ma):la}),ja=ia.join(""),ka=ha.val();ha.data(F.mask.dataName,function(){return F.map(ia,function(la,ma){return P[ma]&&la!=X(ma)?la:null}).join("")}),ha.one("unmask",function(){ha.off(".mask").removeData(F.mask.dataName)}).on("focus.mask",function(){if(!ha.prop("readonly")){clearTimeout(G);var la;ka=ha.val(),la=ga(),G=setTimeout(function(){ha.get(0)===document.activeElement&&(fa(),la==L.replace("?","").length?ha.caret(0,la):ha.caret(la))},10)}}).on("blur.mask",ba).on("keydown.mask",function(la){if(!ha.prop("readonly")){var ma,na,oa,pa=la.which||la.keyCode;U=ha.val(),8===pa||46===pa||I&&127===pa?(ma=ha.caret(),na=ma.begin,oa=ma.end,0==oa-na&&(na=46===pa?oa=Y(na-1):Z(na),oa=46===pa?Y(oa):oa),ea(na,oa),$(na,oa-1),la.preventDefault()):13===pa?ba.call(this,la):27===pa&&(ha.val(ka),ha.caret(0,ga()),la.preventDefault())}}).on("keypress.mask",function(la){if(!ha.prop("readonly")){var ma,na,oa,pa=la.which||la.keyCode,qa=ha.caret();if(!(la.ctrlKey||la.altKey||la.metaKey||32>pa)&&pa&&13!==pa){if(0!=qa.end-qa.begin&&(ea(qa.begin,qa.end),$(qa.begin,qa.end-1)),ma=Y(qa.begin-1),T>ma&&(na=String.fromCharCode(pa),P[ma].test(na))){if(_(ma),ia[ma]=na,fa(),oa=Y(ma),K){var ra=function(){F.proxy(F.fn.caret,ha,oa)()};setTimeout(ra,0)}else ha.caret(oa);qa.begin<=S&&W()}la.preventDefault()}}}).on("input.mask paste.mask",function(){ha.prop("readonly")||setTimeout(function(){var la=ga(!0);ha.caret(la),W()},0)}),J&&K&&ha.off("input.mask").on("input.mask",function(){var la=ha.val(),ma=ha.caret();if(U&&U.length&&U.length>la.length){for(ga(!0);0<ma.begin&&!P[ma.begin-1];)ma.begin--;if(0===ma.begin)for(;ma.begin<R&&!P[ma.begin];)ma.begin++;ha.caret(ma.begin,ma.begin)}else{for(ga(!0);ma.begin<T&&!P[ma.begin];)ma.begin++;ha.caret(ma.begin,ma.begin)}W()}),ga()})}})});